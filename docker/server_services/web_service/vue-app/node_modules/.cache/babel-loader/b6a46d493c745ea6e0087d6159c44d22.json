{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/account/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/account/Profile.vue","mtime":1607175226173},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZ3JhY2UvcGovbWljcm9zZXJ2aWNlc19taWJhbmQ0X2hlYWx0aG1vbml0b3IvZnJvbnRlbmQvdnVlLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBEZXZpY2VNYW5hZ2VtZW50IGZyb20gJ0AvY29tcG9uZW50cy9EZXZpY2VNYW5hZ2VtZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERldmljZU1hbmFnZW1lbnQ6IERldmljZU1hbmFnZW1lbnQKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVzZXIpCiAgICB0aGlzLmdlbmVyYXRlQXZ0U3RyKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogdGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKSwKICAgICAgYXZhdGFyU3RyOiAnJywKICAgICAgbmFtZVVwZGF0ZU1vZGU6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZW50ZXJOYW1lVXBkYXRlTW9kZTogZnVuY3Rpb24gZW50ZXJOYW1lVXBkYXRlTW9kZSgpIHsKICAgICAgdGhpcy5uYW1lVXBkYXRlTW9kZSA9IHRydWU7CiAgICB9LAogICAgZXhpdE5hbWVVcGRhdGVNb2RlOiBmdW5jdGlvbiBleGl0TmFtZVVwZGF0ZU1vZGUoKSB7CiAgICAgIHRoaXMudXNlci5mdWxsbmFtZSA9IHRoaXMuJHNlc3Npb24uZ2V0KCd1c2VyJykuZnVsbG5hbWU7CiAgICAgIHRoaXMubmFtZVVwZGF0ZU1vZGUgPSBmYWxzZTsKICAgIH0sCiAgICBnZW5lcmF0ZUF2dFN0cjogZnVuY3Rpb24gZ2VuZXJhdGVBdnRTdHIoKSB7CiAgICAgIGlmICh0aGlzLnVzZXIuZnVsbG5hbWUgIT0gbnVsbCkgewogICAgICAgIHZhciBzdHIgPSBTdHJpbmcodGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKS5mdWxsbmFtZSk7CiAgICAgICAgdmFyIHNlcGVyYXRlTmFtZSA9IHN0ci5zcGxpdCgiICIpOwoKICAgICAgICBpZiAoc2VwZXJhdGVOYW1lLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICB0aGlzLmF2YXRhclN0ciA9IHNlcGVyYXRlTmFtZVswXVswXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5hdmF0YXJTdHIgPSBzZXBlcmF0ZU5hbWVbMF1bMF0gKyBzZXBlcmF0ZU5hbWVbc2VwZXJhdGVOYW1lLmxlbmd0aCAtIDFdWzBdOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF2YXRhclN0ciA9ICcnOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlTmFtZUFwaUNhbGw6IGZ1bmN0aW9uIHVwZGF0ZU5hbWVBcGlDYWxsKGVtYWlsLCBuZXdOYW1lKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goJ2h0dHA6Ly8xMjcuMC4wLjE6NTAwMC91cGRhdGV1c2VyLycgKyBlbWFpbCwgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQVVQnLAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgJ2Z1bGxuYW1lJzogbmV3TmFtZQogICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgdXNlciA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB1c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTBdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHVwZGF0ZU5hbWU6IGZ1bmN0aW9uIHVwZGF0ZU5hbWUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyB0aGlzLnVwZGF0ZU5hbWVBcGlDYWxsKHRoaXMudXNlci5lbWFpbCwgdGhpcy51c2VyLmZ1bGxuYW1lKQogICAgICB0aGlzLnVwZGF0ZU5hbWVBcGlDYWxsKHRoaXMudXNlci5lbWFpbCwgdGhpcy51c2VyLmZ1bGxuYW1lKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgX3RoaXMuJHNlc3Npb24uc2V0KCd1c2VyJywgdXNlcik7CgogICAgICAgIF90aGlzLmdlbmVyYXRlQXZ0U3RyKCk7CgogICAgICAgIF90aGlzLmV4aXROYW1lVXBkYXRlTW9kZSgpOyAvLyB0aGlzLiRmb3JjZVVwZGF0ZQoKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,OAAA,gBAAA,MAAA,+BAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GADA;AAIA,EAAA,OAJA,qBAIA;AACA;AACA,SAAA,cAAA;AAEA,GARA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,CADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,cAAA,EAAA;AAHA,KAAA;AAKA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,iCACA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,kBAJA,gCAIA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA;AACA,WAAA,cAAA,GAAA,KAAA;AACA,KAPA;AASA,IAAA,cATA,4BASA;AACA,UAAA,KAAA,IAAA,CAAA,QAAA,IAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA,CAAA;AACA,YAAA,YAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,YAAA,YAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,eAAA,SAAA,GAAA,YAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,eAAA,SAAA,GAAA,YAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,YAAA,CAAA,YAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACA;AAEA,OATA,MAUA;AACA,aAAA,SAAA,GAAA,EAAA;AACA;AACA,KAvBA;AAyBA,IAAA,iBAzBA,6BAyBA,KAzBA,EAyBA,OAzBA,EAyBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,CAAA,sCAAA,KAAA,EAAA;AACA,kBAAA,MAAA,EAAA,KADA;AAEA,kBAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AACA,gCAAA;AADA,mBAAA,CAFA;AAKA,kBAAA,OAAA,EAAA;AAAA,oCAAA;AAAA;AALA,iBAAA,CAFA;;AAAA;AAEA,gBAAA,QAFA;AAAA;AAAA,uBASA,QAAA,CAAA,IAAA,EATA;;AAAA;AASA,gBAAA,IATA;AAAA,iDAUA,IAVA;;AAAA;AAAA;AAAA;AAYA,gBAAA,OAAA,CAAA,KAAA;;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA,KAvCA;AAwCA,IAAA,UAxCA,wBAwCA;AAAA;;AACA;AACA,WAAA,iBAAA,CAAA,KAAA,IAAA,CAAA,KAAA,EAAA,KAAA,IAAA,CAAA,QAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,IAAA;;AACA,QAAA,KAAA,CAAA,cAAA;;AACA,QAAA,KAAA,CAAA,kBAAA,GAHA,CAIA;;AACA,OALA;AAMA;AAhDA;AAhBA,CAAA","sourcesContent":["<template>\n    <div class=\"w-50 mx-auto mt-3 mb-3\" v-if=\"this.$session.exists()\">\n        <b-card>\n            <template #header>\n                <div class=\"d-flex justify-content-center\">\n                    <b-avatar :text=\"avatarStr\" size=\"6rem\"></b-avatar>\n                </div>\n                <b-card-title v-if=\"user.fullname==null&&nameUpdateMode!=true\" class=\"text-center mt-2\">\n                    <b-button variant=\"outline-primary\" @click=\"enterNameUpdateMode\">\n                        Please tell us your name üìù\n                    </b-button>\n                </b-card-title>\n                <b-card-title v-else-if=\"nameUpdateMode==true\" class=\"text-center mt-2\">\n                    <b-form @submit.prevent=\"updateName\" inline class=\"d-flex justify-content-around\">\n                        <b-form-input class=\"w-75\"\n                        v-model=\"user.fullname\"\n                        placeholder=\"Enter your name\"\n                    ></b-form-input>\n                    <div>\n                        <b-button @click=\"updateName\" variant=\"success\" class=\"mr-1\">OK</b-button>\n                        <b-button @click=\"exitNameUpdateMode\" variant=\"danger\">‚úñÔ∏è</b-button>\n                    </div>\n                    </b-form>\n                </b-card-title>\n                <b-card-title v-else class=\"text-center mt-2\">\n                    {{user.fullname}}\n                    <b-button variant=\"outline-primary\" @click=\"enterNameUpdateMode\">üìù</b-button>\n                </b-card-title>\n                <b-card-sub-title class=\"text-center\">{{user.email}}</b-card-sub-title>\n                <div class=\"d-flex justify-content-center\">\n                    <b-card-text>üèÜ Strike: 4days</b-card-text>\n                </div>\n            </template>\n\n            <device-management />\n\n            <b-card title=\"More\" class=\"mt-1\">\n                <b-button variant=\"outline-primary\" class=\"w-100\">Set goal</b-button>\n            </b-card>\n\n            <b-card title=\"Account\" class=\"mt-1\">\n                <b-button variant=\"outline-primary\" class=\"w-100 mb-1\">Change password</b-button>\n                <b-button variant=\"outline-primary\" class=\"w-100\">Delete account</b-button>\n            </b-card>\n\n        </b-card>\n    </div>\n</template>\n\n\n<script>\nimport DeviceManagement from '@/components/DeviceManagement'\n\nexport default {\n    components: { \n        DeviceManagement\n    },\n    created() {\n        // console.log(this.user)\n        this.generateAvtStr()\n        \n    },\n    data() {\n        return {\n            user: this.$session.get('user'),\n            avatarStr: '',\n            nameUpdateMode: false,\n        }\n    },\n    methods: {\n        enterNameUpdateMode() {\n            this.nameUpdateMode = true\n        },\n        exitNameUpdateMode() {\n            this.user.fullname=this.$session.get('user').fullname\n            this.nameUpdateMode = false\n        },\n\n        generateAvtStr() {\n            if(this.user.fullname!=null) {\n                var str = String(this.$session.get('user').fullname)\n                var seperateName = str.split(\" \")\n                if(seperateName.length==1){\n                    this.avatarStr = seperateName[0][0]\n                } else {\n                    this.avatarStr=seperateName[0][0] + seperateName[seperateName.length-1][0]\n                }\n                \n            }\n            else{\n                this.avatarStr=''\n            }\n        },\n\n        async updateNameApiCall(email, newName) {\n            try {\n                const response = await fetch('http://127.0.0.1:5000/updateuser/'+email, {\n                method: 'PUT',\n                body: JSON.stringify({\n                    'fullname': newName,\n                    }),\n                headers: { 'Content-type': 'application/json; charset=UTF-8' },\n                })\n                const user = await response.json()\n                return user\n            } catch (error) {\n                console.error(error)\n            }\n        },\n        updateName() {\n            // this.updateNameApiCall(this.user.email, this.user.fullname)\n            this.updateNameApiCall(this.user.email, this.user.fullname).then((user)=>{\n                this.$session.set('user', user)\n                this.generateAvtStr()\n                this.exitNameUpdateMode()\n                // this.$forceUpdate\n            })\n        },\n    }\n}\n</script>"],"sourceRoot":"src/components/account"}]}