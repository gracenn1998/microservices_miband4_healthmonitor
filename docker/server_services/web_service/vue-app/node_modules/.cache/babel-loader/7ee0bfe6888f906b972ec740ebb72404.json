{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/DeviceList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/DeviceList.vue","mtime":1607539144138},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2dyYWNlL3BqL21pY3Jvc2VydmljZXNfbWliYW5kNF9oZWFsdGhtb25pdG9yL2Zyb250ZW5kL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKHRoaXMuJHNlc3Npb24uZ2V0KCdtaWJhbmQnKSA9PSB1bmRlZmluZWQpIHsKICAgICAgdGhpcy5nZXRCYW5kSW5mbygpLnRoZW4oZnVuY3Rpb24gKGJhbmRpbmZvKSB7CiAgICAgICAgaWYgKGJhbmRpbmZvKSB7CiAgICAgICAgICBfdGhpcy4kc2Vzc2lvbi5zZXQoJ21pYmFuZCcsIGJhbmRpbmZvKTsKCiAgICAgICAgICBfdGhpcy4kZW1pdCgndXBkYXRlLWxpc3QtZGlzcGxheScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWliYW5kOiB0aGlzLiRzZXNzaW9uLmdldCgnbWliYW5kJyksCiAgICAgIG1pYmFuZF9kYl9ob3N0OiB0aGlzLiRhcGlfaG9zdHNbJ21pYmFuZF9kYl9hcGknXSwKICAgICAgbWliYW5kX2RiX3BvcnQ6IHRoaXMuJGFwaV9wb3J0c1snbWliYW5kX2RiX2FwaSddLAogICAgICBtaWJhbmRfaG9zdDogdGhpcy4kYXBpX2hvc3RzWydtaWJhbmRfYXBpJ10sCiAgICAgIG1pYmFuZF9wb3J0OiB0aGlzLiRhcGlfcG9ydHNbJ21pYmFuZF9hcGknXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVtaXRBbmRDbG9zZU1vZGFsOiBmdW5jdGlvbiBlbWl0QW5kQ2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy4kZW1pdCgndW5wYWlyLWJhbmQnKTsKICAgICAgdGhpcy4kYnZNb2RhbC5oaWRlKCdjb25maXJtLXJlbW92ZS1tb2RhbCcpOwogICAgfSwKICAgIGdldEJhbmRJbmZvOiBmdW5jdGlvbiBnZXRCYW5kSW5mbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1c2VyaWQsIHBhcmFtcywgcmVzcG9uc2UsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1c2VyaWQgPSBfdGhpczIuJHNlc3Npb24uZ2V0KCd1c2VyJykuaWQ7CiAgICAgICAgICAgICAgICBwYXJhbXMgPSAnP3VzZXJfaWQ9JyArIHVzZXJpZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChfdGhpczIubWliYW5kX2RiX2hvc3QsICI6IikuY29uY2F0KF90aGlzMi5taWJhbmRfZGJfcG9ydCwgIi9iYW5kcy9maW5kLWJ5LXVzZXJpZCIpLmNvbmNhdChwYXJhbXMpKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdFsnZ2V0LWJhbmQtcmVzdWx0J10gPT0gJ3N1Y2NlZWRlZCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0WydiYW5kLWluZm8nXSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1syLCAxNF1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["DeviceList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,eAAA;AACA,EAAA,OADA,qBACA;AAAA;;AACA,QAAA,KAAA,QAAA,CAAA,GAAA,CAAA,QAAA,KAAA,SAAA,EAAA;AACA,WAAA,WAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,QAAA,EAAA,QAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,qBAAA;AACA;AACA,OALA;AAMA;AACA,GAVA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KAAA,QAAA,CAAA,GAAA,CAAA,QAAA,CADA;AAGA,MAAA,cAAA,EAAA,KAAA,UAAA,CAAA,eAAA,CAHA;AAIA,MAAA,cAAA,EAAA,KAAA,UAAA,CAAA,eAAA,CAJA;AAKA,MAAA,WAAA,EAAA,KAAA,UAAA,CAAA,YAAA,CALA;AAMA,MAAA,WAAA,EAAA,KAAA,UAAA,CAAA,YAAA;AANA,KAAA;AAQA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,+BACA;AACA,WAAA,KAAA,CAAA,aAAA;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,sBAAA;AACA,KAJA;AAMA,IAAA,WANA,yBAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MADA,GACA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,EADA;AAEA,gBAAA,MAFA,GAEA,cAAA,MAFA;AAAA;AAAA;AAAA,uBAIA,KAAA,kBAAA,MAAA,CAAA,cAAA,cAAA,MAAA,CAAA,cAAA,kCAAA,MAAA,EAJA;;AAAA;AAIA,gBAAA,QAJA;AAAA;AAAA,uBAKA,QAAA,CAAA,IAAA,EALA;;AAAA;AAKA,gBAAA,MALA;;AAAA,sBAMA,MAAA,CAAA,iBAAA,CAAA,IAAA,WANA;AAAA;AAAA;AAAA;;AAAA,iDAOA,MAAA,CAAA,WAAA,CAPA;;AAAA;AAAA,iDASA,KATA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAnBA;AArBA,CAAA","sourcesContent":["<template>\n  <div>\n    <b-card v-if=\"$session.get('miband')!=undefined\">\n      <div class=\"card-header d-flex justify-content-between\">\n        <h4>Miband</h4>\n        <div>\n          <!-- <b-button \n            v-b-tooltip.hover title=\"Edit\"\n            v-b-modal.confirm-remove-modal\n            variant=\"outline-primary\"\n          >üìù</b-button> -->\n          <b-button  class=\"ml-2\"\n            v-b-tooltip.hover title=\"Unpair\"\n            v-b-modal.confirm-remove-modal\n            variant=\"outline-danger\"\n          >‚úñÔ∏è</b-button>\n        </div>\n        \n\n        <b-modal id=\"confirm-remove-modal\" hide-footer title=\"Confirmation\">\n          <div class=\"d-block text-center\">\n            <h4>Do you really want to unpair this device?</h4>\n          </div>\n          <div class=\"d-flex justify-content-end\">\n            <b-button class=\"mt-3 mr-3\"  @click=\"$bvModal.hide('confirm-remove-modal')\">Cancel</b-button>\n            <b-button class=\"mt-3 mr-4\" variant=\"danger\" @click=\"emitAndCloseModal()\">Unpair</b-button>\n          </div>\n          \n        </b-modal>\n      </div>\n\n      <b-list-group horizontal>\n        <b-list-group-item class=\"w-25\">MAC</b-list-group-item>\n        <b-list-group-item class=\"w-75\">{{miband.mac_address}}</b-list-group-item>\n      </b-list-group>\n      <b-list-group horizontal>\n        <b-list-group-item class=\"w-25\">Key</b-list-group-item>\n        <b-list-group-item class=\"w-75\">{{miband.auth_key}}</b-list-group-item>\n      </b-list-group>\n      \n\n    </b-card>\n  </div>\n  \n</template>\n\n<script>\n\n  export default {\n    created() {\n      if(this.$session.get('miband')==undefined) {\n        this.getBandInfo().then((bandinfo)=>{\n          if(bandinfo){\n            this.$session.set('miband', bandinfo)\n            this.$emit('update-list-display')\n          }\n        })\n      }\n    },\n    data() {\n      return {\n        miband: this.$session.get('miband'),\n\n        miband_db_host: this.$api_hosts['miband_db_api'],\n        miband_db_port: this.$api_ports['miband_db_api'],\n        miband_host: this.$api_hosts['miband_api'],\n        miband_port: this.$api_ports['miband_api']\n      }\n    },\n    methods: {\n      emitAndCloseModal() {\n        this.$emit('unpair-band')\n        this.$bvModal.hide('confirm-remove-modal')\n      },\n\n      async getBandInfo() {\n        const userid = this.$session.get('user').id\n        const params = '?user_id='+userid\n        try {\n            const response = await fetch(`http://${this.miband_db_host}:${this.miband_db_port}/bands/find-by-userid${params}`)\n            const result = await response.json()\n            if(result['get-band-result']=='succeeded'){\n              return result['band-info']\n            }\n            return false\n        } catch (error) {\n            // do something with `error`\n        }\n        },\n    }\n  }\n</script>"],"sourceRoot":"src/components/device"}]}