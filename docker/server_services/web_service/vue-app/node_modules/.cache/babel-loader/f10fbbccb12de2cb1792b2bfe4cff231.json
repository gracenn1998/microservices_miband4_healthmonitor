{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/account/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/account/Profile.vue","mtime":1607337137923},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvZ3JhY2UvcGovbWljcm9zZXJ2aWNlc19taWJhbmQ0X2hlYWx0aG1vbml0b3IvZnJvbnRlbmQvdnVlLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBEZXZpY2VNYW5hZ2VtZW50IGZyb20gJ0AvY29tcG9uZW50cy9EZXZpY2VNYW5hZ2VtZW50JzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIERldmljZU1hbmFnZW1lbnQ6IERldmljZU1hbmFnZW1lbnQKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVzZXIpCiAgICB0aGlzLmdlbmVyYXRlQXZ0U3RyKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogdGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKSwKICAgICAgYXZhdGFyU3RyOiAnJywKICAgICAgbmFtZVVwZGF0ZU1vZGU6IGZhbHNlLAogICAgICB1c2VyX2RiX2hvc3Q6IHRoaXMuJGFwaV9ob3N0c1sndXNlcl9kYl9hcGknXSwKICAgICAgdXNlcl9kYl9wb3J0OiB0aGlzLiRhcGlfcG9ydHNbJ3VzZXJfZGJfYXBpJ10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbnRlck5hbWVVcGRhdGVNb2RlOiBmdW5jdGlvbiBlbnRlck5hbWVVcGRhdGVNb2RlKCkgewogICAgICB0aGlzLm5hbWVVcGRhdGVNb2RlID0gdHJ1ZTsKICAgIH0sCiAgICBleGl0TmFtZVVwZGF0ZU1vZGU6IGZ1bmN0aW9uIGV4aXROYW1lVXBkYXRlTW9kZSgpIHsKICAgICAgdGhpcy51c2VyLmZ1bGxuYW1lID0gdGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKS5mdWxsbmFtZTsKICAgICAgdGhpcy5uYW1lVXBkYXRlTW9kZSA9IGZhbHNlOwogICAgfSwKICAgIGdlbmVyYXRlQXZ0U3RyOiBmdW5jdGlvbiBnZW5lcmF0ZUF2dFN0cigpIHsKICAgICAgaWYgKHRoaXMudXNlci5mdWxsbmFtZSAhPSBudWxsKSB7CiAgICAgICAgdmFyIHN0ciA9IFN0cmluZyh0aGlzLiRzZXNzaW9uLmdldCgndXNlcicpLmZ1bGxuYW1lKTsKICAgICAgICB2YXIgc2VwZXJhdGVOYW1lID0gc3RyLnNwbGl0KCIgIik7CgogICAgICAgIGlmIChzZXBlcmF0ZU5hbWUubGVuZ3RoID09IDEpIHsKICAgICAgICAgIHRoaXMuYXZhdGFyU3RyID0gc2VwZXJhdGVOYW1lWzBdWzBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF2YXRhclN0ciA9IHNlcGVyYXRlTmFtZVswXVswXSArIHNlcGVyYXRlTmFtZVtzZXBlcmF0ZU5hbWUubGVuZ3RoIC0gMV1bMF07CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYXZhdGFyU3RyID0gJyc7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVOYW1lQXBpQ2FsbDogZnVuY3Rpb24gdXBkYXRlTmFtZUFwaUNhbGwobmV3TmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdWlkLCByZXNwb25zZSwgdXNlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1aWQgPSBfdGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKS5pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChfdGhpcy51c2VyX2RiX2hvc3QsICI6IikuY29uY2F0KF90aGlzLnVzZXJfZGJfcG9ydCwgIi91c2Vycy8iKS5jb25jYXQodWlkLCAiL2Z1bGxuYW1lIiksIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICdmdWxsbmFtZSc6IG5ld05hbWUKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHVzZXIgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgdXNlcik7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzEsIDExXV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVOYW1lOiBmdW5jdGlvbiB1cGRhdGVOYW1lKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIHRoaXMudXBkYXRlTmFtZUFwaUNhbGwodGhpcy51c2VyLmVtYWlsLCB0aGlzLnVzZXIuZnVsbG5hbWUpCiAgICAgIHRoaXMudXBkYXRlTmFtZUFwaUNhbGwodGhpcy51c2VyLmZ1bGxuYW1lKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7CiAgICAgICAgX3RoaXMyLiRzZXNzaW9uLnNldCgndXNlcicsIHVzZXIpOwoKICAgICAgICBfdGhpczIuZ2VuZXJhdGVBdnRTdHIoKTsKCiAgICAgICAgX3RoaXMyLmV4aXROYW1lVXBkYXRlTW9kZSgpOyAvLyB0aGlzLiRmb3JjZVVwZGF0ZQoKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,OAAA,gBAAA,MAAA,+BAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,gBAAA,EAAA;AADA,GADA;AAIA,EAAA,OAJA,qBAIA;AACA;AACA,SAAA,cAAA;AAEA,GARA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,CADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,cAAA,EAAA,KAHA;AAIA,MAAA,YAAA,EAAA,KAAA,UAAA,CAAA,aAAA,CAJA;AAKA,MAAA,YAAA,EAAA,KAAA,UAAA,CAAA,aAAA;AALA,KAAA;AAOA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,iCACA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,kBAJA,gCAIA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA;AACA,WAAA,cAAA,GAAA,KAAA;AACA,KAPA;AASA,IAAA,cATA,4BASA;AACA,UAAA,KAAA,IAAA,CAAA,QAAA,IAAA,IAAA,EAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,KAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,QAAA,CAAA;AACA,YAAA,YAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,YAAA,YAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,eAAA,SAAA,GAAA,YAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,eAAA,SAAA,GAAA,YAAA,CAAA,CAAA,CAAA,CAAA,CAAA,IAAA,YAAA,CAAA,YAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA;AACA;AAEA,OATA,MAUA;AACA,aAAA,SAAA,GAAA,EAAA;AACA;AACA,KAvBA;AAyBA,IAAA,iBAzBA,6BAyBA,OAzBA,EAyBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,EADA;AAAA;AAAA;AAAA,uBAGA,KAAA,kBAAA,KAAA,CAAA,YAAA,cAAA,KAAA,CAAA,YAAA,oBAAA,GAAA,gBAAA;AACA,kBAAA,MAAA,EAAA,KADA;AAEA,kBAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AACA,gCAAA;AADA,mBAAA,CAFA;AAKA,kBAAA,OAAA,EAAA;AAAA,oCAAA;AAAA;AALA,iBAAA,CAHA;;AAAA;AAGA,gBAAA,QAHA;AAAA;AAAA,uBAUA,QAAA,CAAA,IAAA,EAVA;;AAAA;AAUA,gBAAA,IAVA;AAAA,iDAWA,IAXA;;AAAA;AAAA;AAAA;AAaA,gBAAA,OAAA,CAAA,KAAA;;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA,KAxCA;AAyCA,IAAA,UAzCA,wBAyCA;AAAA;;AACA;AACA,WAAA,iBAAA,CAAA,KAAA,IAAA,CAAA,QAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,IAAA;;AACA,QAAA,MAAA,CAAA,cAAA;;AACA,QAAA,MAAA,CAAA,kBAAA,GAHA,CAIA;;AACA,OALA;AAMA;AAjDA;AAlBA,CAAA","sourcesContent":["<template>\n    <div class=\"w-50 mx-auto mt-3 mb-3\" v-if=\"this.$session.exists()\">\n        <b-card>\n            <template #header>\n                <div class=\"d-flex justify-content-center\">\n                    <b-avatar :text=\"avatarStr\" size=\"6rem\"></b-avatar>\n                </div>\n                <b-card-title v-if=\"user.fullname==null&&nameUpdateMode!=true\" class=\"text-center mt-2\">\n                    <b-button variant=\"outline-primary\" @click=\"enterNameUpdateMode\">\n                        Please tell us your name üìù\n                    </b-button>\n                </b-card-title>\n                <b-card-title v-else-if=\"nameUpdateMode==true\" class=\"text-center mt-2\">\n                    <b-form @submit.prevent=\"updateName\" inline class=\"d-flex justify-content-around\">\n                        <b-form-input class=\"w-75\"\n                        v-model=\"user.fullname\"\n                        placeholder=\"Enter your name\"\n                    ></b-form-input>\n                    <div>\n                        <b-button @click=\"updateName\" variant=\"success\" class=\"mr-1\">OK</b-button>\n                        <b-button @click=\"exitNameUpdateMode\" variant=\"danger\">‚úñÔ∏è</b-button>\n                    </div>\n                    </b-form>\n                </b-card-title>\n                <b-card-title v-else class=\"text-center mt-2\">\n                    {{user.fullname}}\n                    <b-button variant=\"outline-primary\" @click=\"enterNameUpdateMode\">üìù</b-button>\n                </b-card-title>\n                <b-card-sub-title class=\"text-center\">{{user.email}}</b-card-sub-title>\n                <div class=\"d-flex justify-content-center\">\n                    <b-card-text>üèÜ Strike: 4days</b-card-text>\n                </div>\n            </template>\n\n            <device-management />\n\n            <b-card title=\"More\" class=\"mt-1\">\n                <b-button variant=\"outline-primary\" class=\"w-100\">Set goal</b-button>\n            </b-card>\n\n            <b-card title=\"Account\" class=\"mt-1\">\n                <b-button variant=\"outline-primary\" class=\"w-100 mb-1\">Change password</b-button>\n                <b-button variant=\"outline-primary\" class=\"w-100\">Delete account</b-button>\n            </b-card>\n\n        </b-card>\n    </div>\n</template>\n\n\n<script>\nimport DeviceManagement from '@/components/DeviceManagement'\n\nexport default {\n    components: { \n        DeviceManagement\n    },\n    created() {\n        // console.log(this.user)\n        this.generateAvtStr()\n        \n    },\n    data() {\n        return {\n            user: this.$session.get('user'),\n            avatarStr: '',\n            nameUpdateMode: false,\n            user_db_host: this.$api_hosts['user_db_api'],\n            user_db_port: this.$api_ports['user_db_api']\n        }\n    },\n    methods: {\n        enterNameUpdateMode() {\n            this.nameUpdateMode = true\n        },\n        exitNameUpdateMode() {\n            this.user.fullname=this.$session.get('user').fullname\n            this.nameUpdateMode = false\n        },\n\n        generateAvtStr() {\n            if(this.user.fullname!=null) {\n                var str = String(this.$session.get('user').fullname)\n                var seperateName = str.split(\" \")\n                if(seperateName.length==1){\n                    this.avatarStr = seperateName[0][0]\n                } else {\n                    this.avatarStr=seperateName[0][0] + seperateName[seperateName.length-1][0]\n                }\n                \n            }\n            else{\n                this.avatarStr=''\n            }\n        },\n\n        async updateNameApiCall(newName) {\n            const uid = this.$session.get('user').id\n            try {\n                const response = await fetch(`http://${this.user_db_host}:${this.user_db_port}/users/${uid}/fullname`, {\n                method: 'PUT',\n                body: JSON.stringify({\n                    'fullname': newName,\n                    }),\n                headers: { 'Content-type': 'application/json; charset=UTF-8' },\n                })\n                const user = await response.json()\n                return user\n            } catch (error) {\n                console.error(error)\n            }\n        },\n        updateName() {\n            // this.updateNameApiCall(this.user.email, this.user.fullname)\n            this.updateNameApiCall(this.user.fullname).then((user)=>{\n                this.$session.set('user', user)\n                this.generateAvtStr()\n                this.exitNameUpdateMode()\n                // this.$forceUpdate\n            })\n        },\n    }\n}\n</script>"],"sourceRoot":"src/components/account"}]}