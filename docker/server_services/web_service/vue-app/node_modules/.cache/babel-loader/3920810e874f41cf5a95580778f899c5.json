{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/PairDeviceForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/PairDeviceForm.vue","mtime":1607175226173},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2dyYWNlL3BqL21pY3Jvc2VydmljZXNfbWliYW5kNF9oZWFsdGhtb25pdG9yL2Zyb250ZW5kL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgbWliYW5kX2RiX2hvc3QgPSAnMTkyLjE2OC4xMS4xMjInOwp2YXIgbWliYW5kX2hvc3QgPSAnMTkyLjE2OC4xMS4xMjInOwp2YXIgbWliYW5kX2RiX3BvcnQgPSAnNTAwMic7CnZhciBtaWJhbmRfcG9ydCA9ICc1MDAxJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiB7CiAgICBtYWNhZGRTdGF0ZTogZnVuY3Rpb24gbWFjYWRkU3RhdGUoKSB7CiAgICAgIHZhciByZWdleCA9IC9eKChbQS1GYS1mMC05XXsyfVs6XSl7NX1bQS1GYS1mMC05XXsyfVssXT8pKyQvaTsKCiAgICAgIGlmICh0aGlzLm1pYmFuZC5tYWNfYWRkID09ICcnKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdleC50ZXN0KHRoaXMubWliYW5kLm1hY19hZGQpOwogICAgfSwKICAgIGF1dGhrZXlTdGF0ZTogZnVuY3Rpb24gYXV0aGtleVN0YXRlKCkgewogICAgICBpZiAodGhpcy5taWJhbmQuYXV0aF9rZXkgPT0gJycpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubWliYW5kLmF1dGhfa2V5Lmxlbmd0aCA9PSAzMjsKICAgIH0sCiAgICBpbnZhbGlkTUFDYWRkOiBmdW5jdGlvbiBpbnZhbGlkTUFDYWRkKCkgewogICAgICBpZiAodGhpcy5taWJhbmQubWFjX2FkZC5sZW5ndGggPj0gMTcpIHsKICAgICAgICByZXR1cm4gJ1BsZWFzZSBjaGVjayB5b3VyIGZvcm1hdC4gRXhhbXBsZTogYTE6YjI6YzM6ZDQ6ZTU6ZjYnOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICBpbnZhbGlkQXV0aGtleTogZnVuY3Rpb24gaW52YWxpZEF1dGhrZXkoKSB7CiAgICAgIGlmICh0aGlzLm1pYmFuZC5hdXRoX2tleS5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuICdBdXRoZW50aWMga2V5IGxlbmd0aCBpcyAzMi4gRXhhbXBsZTogOGZhOWI0MjA3ODYyN2E2NTRkMjJiZWZmOTg1NjU1ZGInOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtaWJhbmQ6IHsKICAgICAgICBtYWNfYWRkOiAnRTM6MDc6NzI6MjY6RDQ6NkInLAogICAgICAgIGF1dGhfa2V5OiAnMmYyMGJhNDRmZGNmNTRjYTBjMmMzN2NhZDFmODU0ODcnCiAgICAgIH0sCiAgICAgIHBhaXJpbmdTdGF0dXM6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb25uZWN0QmFuZEFwaUNhbGw6IGZ1bmN0aW9uIGNvbm5lY3RCYW5kQXBpQ2FsbChtYWNfYWRkLCBhdXRoX2tleSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChtaWJhbmRfaG9zdCwgIjoiKS5jb25jYXQobWliYW5kX3BvcnQsICIvY29ubmVjdCIpLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgJ21hY19hZGQnOiBtYWNfYWRkLAogICAgICAgICAgICAgICAgICAgICdhdXRoX2tleSc6IGF1dGhfa2V5CiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdFsnY29ubmVjdC1yZXN1bHQnXSA9PSAnc3VjY2VlZGVkJykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXN1bHRbJ2JhbmQtaW5mbyddKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1swLCAxNF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkQmFuZER0YkFwaUNhbGw6IGZ1bmN0aW9uIGFkZEJhbmREdGJBcGlDYWxsKG1pYmFuZCwgdXNlcmlkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBib2R5ZGF0YSwga2V5LCByZXNwb25zZSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBib2R5ZGF0YSA9IHt9OwoKICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG1pYmFuZCkgewogICAgICAgICAgICAgICAgICBib2R5ZGF0YVtrZXldID0gbWliYW5kW2tleV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYm9keWRhdGFbJ3VpZCddID0gdXNlcmlkOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAzOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCJodHRwOi8vIi5jb25jYXQobWliYW5kX2RiX2hvc3QsICI6IikuY29uY2F0KG1pYmFuZF9kYl9wb3J0LCAiL2FkZGJhbmQiKSwgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keWRhdGEpLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdFsnYWRkLWJhbmQtcmVzdWx0J10gPT0gJ3N1Y2NlZWRlZCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXN1bHRbJ2JhbmQtaW5mbyddKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE3OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDIudDApOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzMsIDE3XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGRCYW5kOiBmdW5jdGlvbiBhZGRCYW5kKG1hY19hZGQsIGF1dGhfa2V5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5tYWNhZGRTdGF0ZSAmJiB0aGlzLmF1dGhrZXlTdGF0ZSkgewogICAgICAgIHRoaXMuY29ubmVjdEJhbmRBcGlDYWxsKG1hY19hZGQsIGF1dGhfa2V5KS50aGVuKGZ1bmN0aW9uIChiYW5kKSB7CiAgICAgICAgICBpZiAoYmFuZCkgewogICAgICAgICAgICAvL3NhdmUgZHRiCiAgICAgICAgICAgIC8vYXNzaWduIGJhbmQgaW5mbyB0byBtaWJhbmQgcmVmCiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBiYW5kKSB7CiAgICAgICAgICAgICAgX3RoaXMubWliYW5kW2tleV0gPSBiYW5kW2tleV07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciB1c2VyaWQgPSBfdGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKS5pZDsKCiAgICAgICAgICAgIF90aGlzLmFkZEJhbmREdGJBcGlDYWxsKF90aGlzLm1pYmFuZCwgdXNlcmlkKS50aGVuKGZ1bmN0aW9uIChiYW5kKSB7CiAgICAgICAgICAgICAgaWYgKGJhbmQpIHsKICAgICAgICAgICAgICAgIF90aGlzLiRzZXNzaW9uLnNldCgnbWliYW5kJywgX3RoaXMubWliYW5kKTsgLy9maW5pc2hlZAoKCiAgICAgICAgICAgICAgICBfdGhpcy5wYWlyaW5nU3RhdHVzID0gJ09LJzsKCiAgICAgICAgICAgICAgICBfdGhpcy4kZW1pdCgndXBkYXRlLWxpc3QtZGlzcGxheScpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpcy5wYWlyaW5nU3RhdHVzID0gJ0RUQic7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5wYWlyaW5nU3RhdHVzID0gJ0VSUk9SJzsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLnBhaXJpbmdTdGF0dXMgPSAnUEVORElORyc7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["PairDeviceForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <b-card-title class=\"text-center mt-2\">\n      <div v-if=\"pairingStatus === 'OK'\">\n        <b-alert variant=\"success\" show>Pairing succeeded</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'ERROR'\">\n        <b-alert variant=\"danger\" show>Pair failed. Please check data correctness or data format</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'PENDING'\">\n        <b-alert variant=\"info\" show>Pairing...</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'DTB'\">\n        <b-alert variant=\"info\" show>Adding to database</b-alert>\n      </div>\n      \n      <b-skeleton-wrapper :loading=\"pairingStatus === 'PENDING' || pairingStatus === 'DTB'\">\n        <template #loading>\n        <b-card>\n          <b-skeleton width=\"85%\"></b-skeleton>\n          <b-skeleton width=\"55%\"></b-skeleton>\n          <b-skeleton width=\"70%\"></b-skeleton>\n        </b-card>\n      </template>\n      <b-form @submit.prevent=\"addBand\" v-if=\"pairingStatus !== 'OK'\">\n          <b-form-group \n            label=\"MAC address\"\n            :invalid-feedback=\"invalidMACadd\"\n            :state=\"macaddState\"\n          >\n            <b-form-input class=\"w-100 mb-1\"\n              :state=\"macaddState\"\n              v-model=\"miband.mac_add\"\n              required\n              placeholder=\"Example: a1:c2:3d:4e:f5:6a\"\n            ></b-form-input>\n          </b-form-group>\n\n          <b-form-group \n            label=\"Authentic key\"\n            :invalid-feedback=\"invalidAuthkey\"\n            :state=\"authkeyState\"\n          >\n            <b-form-input class=\"w-100 mb-1\"\n              :state=\"authkeyState\"\n              v-model=\"miband.auth_key\"\n              required\n              placeholder=\"Example: 8fa9b42078627a654d22beff985655db\"\n            ></b-form-input>\n          </b-form-group>\n          <div>\n              <b-button @click=\"addBand(miband.mac_add, miband.auth_key)\" variant=\"outline-success\" class=\"mr-1\">➕</b-button>\n              <b-button @click=\"$emit('exit-add-band-mode')\" variant=\"outline-danger\">✖️</b-button>\n          </div>\n      </b-form>\n      </b-skeleton-wrapper>\n    </b-card-title>\n  </div>\n</template>\n\n<script>\nconst miband_db_host='192.168.11.122'\nconst miband_host='192.168.11.122'\nconst miband_db_port='5002'\nconst miband_port='5001'\n\nexport default {\n  computed: {\n    macaddState() {\n      var regex = /^(([A-Fa-f0-9]{2}[:]){5}[A-Fa-f0-9]{2}[,]?)+$/i;\n      \n      if(this.miband.mac_add=='') {\n        return null\n      }\n      return regex.test(this.miband.mac_add)\n    },\n    authkeyState() {\n      if(this.miband.auth_key=='') {\n        return null\n      }\n      return this.miband.auth_key.length == 32\n    },\n    invalidMACadd() {\n      if (this.miband.mac_add.length >= 17) {\n        return  'Please check your format. Example: a1:b2:c3:d4:e5:f6'\n      }\n      return null\n    },\n    invalidAuthkey() {\n      if (this.miband.auth_key.length > 0) {\n        return  'Authentic key length is 32. Example: 8fa9b42078627a654d22beff985655db'\n      }\n      return null\n    },\n  },\n  data() {\n    return {\n      miband: {\n          mac_add: 'E3:07:72:26:D4:6B',\n          auth_key: '2f20ba44fdcf54ca0c2c37cad1f85487'\n      },\n      pairingStatus: null,\n    }\n  },\n  methods: {\n    async connectBandApiCall(mac_add, auth_key) {\n        try {\n            const response = await fetch(`http://${miband_host}:${miband_port}/connect`, {\n            method: 'POST',\n            body: JSON.stringify({\n                'mac_add': mac_add,\n                'auth_key': auth_key\n                }),\n            headers: { 'Content-type': 'application/json; charset=UTF-8' },\n            })\n            const result = await response.json()\n            if(result['connect-result']=='succeeded') {\n              return result['band-info']\n            }\n            else return false\n        } catch (error) {\n            console.error(error)\n        }\n    },\n\n    async addBandDtbApiCall(miband, userid) {\n        const bodydata = {}\n        for (var key in miband) {\n          bodydata[key] = miband[key]\n        }\n        bodydata['uid'] = userid\n        try {\n            const response = await fetch(`http://${miband_db_host}:${miband_db_port}/addband`, {\n            method: 'POST',\n            body: JSON.stringify(\n                bodydata\n                ),\n            headers: { 'Content-type': 'application/json; charset=UTF-8' },\n            })\n            const result = await response.json()\n            if(result['add-band-result']=='succeeded') {\n              return result['band-info']\n            }\n            else return false\n        } catch (error) {\n            console.error(error)\n        }\n    },\n\n    \n\n    addBand(mac_add, auth_key) {\n      if(this.macaddState && this.authkeyState) {\n        this.connectBandApiCall(mac_add, auth_key).then((band)=>{\n          if(band) {\n            //save dtb\n            //assign band info to miband ref\n            for(var key in band) {\n              this.miband[key] = band[key]\n            }\n            const userid = this.$session.get('user').id\n            this.addBandDtbApiCall(this.miband, userid).then((band)=>{\n              if(band) {\n                this.$session.set('miband', this.miband)\n                //finished\n                this.pairingStatus = 'OK'\n                this.$emit('update-list-display')\n              }\n            })\n            this.pairingStatus = 'DTB'\n          }\n          else {\n            this.pairingStatus = 'ERROR'\n          }\n      \n        })\n        \n        this.pairingStatus = 'PENDING'\n      }\n      \n    }\n  }\n}\n</script>"],"sourceRoot":"src/components/device"}]}