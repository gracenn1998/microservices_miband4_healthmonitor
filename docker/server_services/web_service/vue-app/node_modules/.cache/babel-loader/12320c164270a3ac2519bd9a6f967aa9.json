{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/account/SignInForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/account/SignInForm.vue","mtime":1607537916792},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2dyYWNlL3BqL21pY3Jvc2VydmljZXNfbWliYW5kNF9oZWFsdGhtb25pdG9yL2Zyb250ZW5kL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIGNoZWNrZWQ6IFtdCiAgICAgIH0sCiAgICAgIHNob3c6IHRydWUsCiAgICAgIHZhbGlkU2lnbmluOiBudWxsLAogICAgICBzdWJtaXRTdGF0dXM6IG51bGwsCiAgICAgIHVzZXJfZGJfaG9zdDogdGhpcy4kYXBpX2hvc3RzWyd1c2VyX2RiX2FwaSddLAogICAgICB1c2VyX2RiX3BvcnQ6IHRoaXMuJGFwaV9wb3J0c1sndXNlcl9kYl9hcGknXSAvLyBnZXQgdXNlcl9kYl9ob3N0KCkgewogICAgICAvLyAgIHJldHVybiB0aGlzLiRhcGlfaG9zdHNbJ3VzZXJfZGJfYXBpJ10KICAgICAgLy8gfSwKICAgICAgLy8gZ2V0IHVzZXJfZGJfcG9ydCgpIHsKICAgICAgLy8gICByZXR1cm4gdGhpcy4kYXBpX3BvcnRzWyd1c2VyX2RiX2FwaSddCiAgICAgIC8vIH0sCgogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNpZ25pbjogZnVuY3Rpb24gc2lnbmluKGVtYWlsLCBwYXNzd29yZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCJodHRwOi8vIi5jb25jYXQoX3RoaXMudXNlcl9kYl9ob3N0LCAiOiIpLmNvbmNhdChfdGhpcy51c2VyX2RiX3BvcnQsICIvdXNlcnMvbG9naW4iKSwgewogICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICdlbWFpbCc6IGVtYWlsLAogICAgICAgICAgICAgICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkCiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdFsnbG9naW4tcmVzdWx0J10gPT0gJ3N1Y2NlZWRlZCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByZXN1bHRbJ3VzZXInXSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMjsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMTJdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChldnQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBldnQucHJldmVudERlZmF1bHQoKTsgLy9zaWduIGluIGFwaQoKICAgICAgdGhpcy5zaWduaW4odGhpcy5mb3JtLmVtYWlsLCB0aGlzLmZvcm0ucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgIC8vaWYgc2lnbiBpbiBzdWNjZWVkZWQKICAgICAgICAgIF90aGlzMi5zdWJtaXRTdGF0dXMgPSAnT0snOyAvL3N0YXJ0IHNlc3Npb24KCiAgICAgICAgICBfdGhpczIuJHNlc3Npb24uc3RhcnQoKTsKCiAgICAgICAgICBfdGhpczIuJHNlc3Npb24uc2V0KCd1c2VyJywgcmVzdWx0KTsgLy9yb3V0aW5nIHRvIGhvbWVwYWdlCgoKICAgICAgICAgIF90aGlzMi4kZW1pdCgibG9naW4tc3RhdHVzLWNoYW5nZSIpOwoKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy9pZiBzaWduIGluIGZhaWxlZAogICAgICAgICAgX3RoaXMyLnN1Ym1pdFN0YXR1cyA9ICdFUlJPUic7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5zdWJtaXRTdGF0dXMgPSAnUEVORElORyc7CiAgICB9LAogICAgb25SZXNldDogZnVuY3Rpb24gb25SZXNldChldnQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBldnQucHJldmVudERlZmF1bHQoKTsgLy8gUmVzZXQgb3VyIGZvcm0gdmFsdWVzCgogICAgICB0aGlzLmZvcm0uZW1haWwgPSAnJzsKICAgICAgdGhpcy5mb3JtLnBhc3N3b3JkID0gJyc7CiAgICAgIHRoaXMuZm9ybS5jaGVja2VkID0gW107IC8vIFRyaWNrIHRvIHJlc2V0L2NsZWFyIG5hdGl2ZSBicm93c2VyIGZvcm0gdmFsaWRhdGlvbiBzdGF0ZQoKICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuc3VibWl0U3RhdHVzID0gbnVsbDsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5zaG93ID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["SignInForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA;AAHA,OADA;AAMA,MAAA,IAAA,EAAA,IANA;AAOA,MAAA,WAAA,EAAA,IAPA;AAQA,MAAA,YAAA,EAAA,IARA;AASA,MAAA,YAAA,EAAA,KAAA,UAAA,CAAA,aAAA,CATA;AAUA,MAAA,YAAA,EAAA,KAAA,UAAA,CAAA,aAAA,CAVA,CAWA;AACA;AACA;AACA;AACA;AACA;;AAhBA,KAAA;AAkBA,GApBA;AAqBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,kBACA,KADA,EACA,QADA,EACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,kBAAA,KAAA,CAAA,YAAA,cAAA,KAAA,CAAA,YAAA,mBAAA;AACA,kBAAA,MAAA,EAAA,MADA;AAEA,kBAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AACA,6BAAA,KADA;AAEA,gCAAA;AAFA,mBAAA,CAFA;AAMA,kBAAA,OAAA,EAAA;AAAA,oCAAA;AAAA;AANA,iBAAA,CAFA;;AAAA;AAEA,gBAAA,QAFA;AAAA;AAAA,uBAUA,QAAA,CAAA,IAAA,EAVA;;AAAA;AAUA,gBAAA,MAVA;;AAAA,sBAWA,MAAA,CAAA,cAAA,CAAA,IAAA,WAXA;AAAA;AAAA;AAAA;;AAAA,iDAYA,MAAA,CAAA,MAAA,CAZA;;AAAA;AAAA,iDAeA,KAfA;;AAAA;AAAA;AAAA;AAiBA,gBAAA,OAAA,CAAA,KAAA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KApBA;AAsBA,IAAA,QAtBA,oBAsBA,GAtBA,EAsBA;AAAA;;AACA,MAAA,GAAA,CAAA,cAAA,GADA,CAEA;;AACA,WAAA,MAAA,CAAA,KAAA,IAAA,CAAA,KAAA,EAAA,KAAA,IAAA,CAAA,QAAA,EAAA,IAAA,CAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,EAAA;AAAA;AACA,UAAA,MAAA,CAAA,YAAA,GAAA,IAAA,CADA,CAEA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAJA,CAMA;;;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,qBAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,SATA,MASA;AAAA;AACA,UAAA,MAAA,CAAA,YAAA,GAAA,OAAA;AACA;AACA,OAbA;AAcA,WAAA,YAAA,GAAA,SAAA;AACA,KAxCA;AA0CA,IAAA,OA1CA,mBA0CA,GA1CA,EA0CA;AAAA;;AACA,MAAA,GAAA,CAAA,cAAA,GADA,CAEA;;AACA,WAAA,IAAA,CAAA,KAAA,GAAA,EAAA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,EAAA;AACA,WAAA,IAAA,CAAA,OAAA,GAAA,EAAA,CALA,CAMA;;AACA,WAAA,IAAA,GAAA,KAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,IAAA;AACA,OAFA;AAGA;AAtDA;AArBA,CAAA","sourcesContent":["<template>\n  <div v-if=\"!this.$session.exists()\">\n    <b-card class=\"w-50 mx-auto mt-3\">\n      <div class=\"d-flex justify-content-center mb-3\" >\n        <b-button variant=\"outline-primary\">Sign In Form</b-button>\n      </div>\n      <div v-if=\"submitStatus === 'OK'\">\n        <b-alert variant=\"success\" show>Signed in successfully</b-alert>\n      </div>\n      <div v-if=\"submitStatus === 'ERROR'\">\n        <b-alert variant=\"danger\" show>Email and password are incorrect. Please check again</b-alert>\n      </div>\n      <div v-if=\"submitStatus === 'PENDING'\">\n        <b-alert variant=\"info\" show>Sending request...</b-alert>\n      </div>\n    \n      <b-form @submit=\"onSubmit\" @reset=\"onReset\" v-if=\"show\">\n      <b-form-group \n        label=\"Email address:\"\n      >\n          <b-form-input\n            v-model=\"form.email\"\n            type=\"email\"\n            required\n            placeholder=\"Enter email\"\n          ></b-form-input>\n      </b-form-group>\n\n      <b-form-group \n        label=\"Password:\"\n      >\n          <b-form-input\n            v-model=\"form.password\"\n            type=\"password\"\n            required\n            placeholder=\"Enter password\"\n          ></b-form-input>\n      </b-form-group>\n\n      <!-- <b-form-group>\n          <b-form-checkbox-group v-model=\"form.checked\">\n          <b-form-checkbox value=\"remember\">Remember me</b-form-checkbox>\n          </b-form-checkbox-group>\n      </b-form-group> -->\n\n      <div class=\"d-flex justify-content-center\">\n        <b-button type=\"signin\" variant=\"primary\">SignIn</b-button>\n        <b-button type=\"reset\" variant=\"danger\">Reset</b-button>\n      </div>\n      </b-form>\n    </b-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      form: {\n        email: '',\n        password: '',\n        checked: []\n      },\n      show: true,\n      validSignin: null,\n      submitStatus: null,\n      user_db_host: this.$api_hosts['user_db_api'],\n      user_db_port: this.$api_ports['user_db_api']\n      // get user_db_host() {\n      //   return this.$api_hosts['user_db_api']\n      // },\n      // get user_db_port() {\n      //   return this.$api_ports['user_db_api']\n      // },\n    }\n  },\n  methods: {\n    async signin(email, password) {\n      try {\n        const response = await fetch(`http://${this.user_db_host}:${this.user_db_port}/users/login`, {\n          method: 'POST',\n          body: JSON.stringify({\n            'email': email,\n            'password': password\n            }),\n          headers: { 'Content-type': 'application/json; charset=UTF-8' },\n        })\n        const result = await response.json()\n        if (result['login-result']=='succeeded') { //sign in successfully\n          return result['user']\n        }\n        // if signin failed\n        return false\n      } catch (error) {\n        console.error(error)\n      }\n    },\n\n    onSubmit(evt) {\n      evt.preventDefault()\n      //sign in api\n      this.signin(this.form.email, this.form.password).then((result)=>{\n          if(result) { //if sign in succeeded\n            this.submitStatus = 'OK'\n            //start session\n            this.$session.start()\n            this.$session.set('user', result)\n            \n            //routing to homepage\n            this.$emit(\"login-status-change\")\n            this.$router.push('/')\n          } else { //if sign in failed\n            this.submitStatus = 'ERROR'\n          }\n        })\n        this.submitStatus = 'PENDING'\n    },\n    \n    onReset(evt) {\n      evt.preventDefault()\n      // Reset our form values\n      this.form.email = ''\n      this.form.password = ''\n      this.form.checked = []\n      // Trick to reset/clear native browser form validation state\n      this.show = false\n      this.submitStatus = null\n      this.$nextTick(() => {\n        this.show = true\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/account"}]}