{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/PairDeviceForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/PairDeviceForm.vue","mtime":1607343126323},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2dyYWNlL3BqL21pY3Jvc2VydmljZXNfbWliYW5kNF9oZWFsdGhtb25pdG9yL2Zyb250ZW5kL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcHV0ZWQ6IHsKICAgIG1hY2FkZFN0YXRlOiBmdW5jdGlvbiBtYWNhZGRTdGF0ZSgpIHsKICAgICAgdmFyIHJlZ2V4ID0gL14oKFtBLUZhLWYwLTldezJ9WzpdKXs1fVtBLUZhLWYwLTldezJ9WyxdPykrJC9pOwoKICAgICAgaWYgKHRoaXMubWliYW5kLm1hY19hZGRyZXNzID09ICcnKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdleC50ZXN0KHRoaXMubWliYW5kLm1hY19hZGRyZXNzKTsKICAgIH0sCiAgICBhdXRoa2V5U3RhdGU6IGZ1bmN0aW9uIGF1dGhrZXlTdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMubWliYW5kLmF1dGhfa2V5ID09ICcnKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLm1pYmFuZC5hdXRoX2tleS5sZW5ndGggPT0gMzI7CiAgICB9LAogICAgaW52YWxpZE1BQ2FkZDogZnVuY3Rpb24gaW52YWxpZE1BQ2FkZCgpIHsKICAgICAgaWYgKHRoaXMubWliYW5kLm1hY19hZGRyZXNzLmxlbmd0aCA+PSAxNykgewogICAgICAgIHJldHVybiAnUGxlYXNlIGNoZWNrIHlvdXIgZm9ybWF0LiBFeGFtcGxlOiBhMTpiMjpjMzpkNDplNTpmNic7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGludmFsaWRBdXRoa2V5OiBmdW5jdGlvbiBpbnZhbGlkQXV0aGtleSgpIHsKICAgICAgaWYgKHRoaXMubWliYW5kLmF1dGhfa2V5Lmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gJ0F1dGhlbnRpYyBrZXkgbGVuZ3RoIGlzIDMyLiBFeGFtcGxlOiA4ZmE5YjQyMDc4NjI3YTY1NGQyMmJlZmY5ODU2NTVkYic7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1pYmFuZDogewogICAgICAgIG1hY19hZGRyZXNzOiAnRTM6MDc6NzI6MjY6RDQ6NkInLAogICAgICAgIGF1dGhfa2V5OiAnMmYyMGJhNDRmZGNmNTRjYTBjMmMzN2NhZDFmODU0ODcnCiAgICAgIH0sCiAgICAgIHBhaXJpbmdTdGF0dXM6IG51bGwsCiAgICAgIG1pYmFuZF9kYl9ob3N0OiB0aGlzLiRhcGlfaG9zdHNbJ21pYmFuZF9kYl9hcGknXSwKICAgICAgbWliYW5kX2RiX3BvcnQ6IHRoaXMuJGFwaV9wb3J0c1snbWliYW5kX2RiX2FwaSddLAogICAgICBtaWJhbmRfaG9zdDogdGhpcy4kYXBpX2hvc3RzWydtaWJhbmRfYXBpJ10sCiAgICAgIG1pYmFuZF9wb3J0OiB0aGlzLiRhcGlfcG9ydHNbJ21pYmFuZF9hcGknXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNvbm5lY3RCYW5kQXBpQ2FsbDogZnVuY3Rpb24gY29ubmVjdEJhbmRBcGlDYWxsKG1hY19hZGQsIGF1dGhfa2V5KSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAwOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChfdGhpcy5taWJhbmRfaG9zdCwgIjoiKS5jb25jYXQoX3RoaXMubWliYW5kX3BvcnQsICIvYmFuZC9jb25uZWN0IiksIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAnbWFjX2FkZCc6IG1hY19hZGQsCiAgICAgICAgICAgICAgICAgICAgJ2F1dGhfa2V5JzogYXV0aF9rZXkKICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0Wydjb25uZWN0LXJlc3VsdCddID09ICdzdWNjZWVkZWQnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3VsdFsnYmFuZC1pbmZvJ10pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDE0XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGROZXdCYW5kRHRiQXBpQ2FsbDogZnVuY3Rpb24gYWRkTmV3QmFuZER0YkFwaUNhbGwobWliYW5kKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHVzZXJfaWQsIGJvZHlkYXRhLCBrZXksIHJlc3BvbnNlLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVzZXJfaWQgPSBfdGhpczIuJHNlc3Npb24uZ2V0KCd1c2VyJykuaWQ7CiAgICAgICAgICAgICAgICBib2R5ZGF0YSA9IHt9OwoKICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG1pYmFuZCkgewogICAgICAgICAgICAgICAgICBib2R5ZGF0YVtrZXldID0gbWliYW5kW2tleV07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYm9keWRhdGFbJ3VzZXJfaWQnXSA9IHVzZXJfaWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChfdGhpczIubWliYW5kX2RiX2hvc3QsICI6IikuY29uY2F0KF90aGlzMi5taWJhbmRfZGJfcG9ydCwgIi9iYW5kcyIpLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShib2R5ZGF0YSksCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHRbJ2FkZC1iYW5kLXJlc3VsdCddID09ICdzdWNjZWVkZWQnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0WydiYW5kLWluZm8nXSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxODsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSg0KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1s0LCAxOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgYWRkQXZhaWxhYmxlQmFuZER0YkFwaUNhbGw6IGZ1bmN0aW9uIGFkZEF2YWlsYWJsZUJhbmREdGJBcGlDYWxsKG1pYmFuZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB1c2VyX2lkLCBiYW5kX2lkLCBib2R5ZGF0YSwga2V5LCByZXNwb25zZSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1c2VyX2lkID0gX3RoaXMzLiRzZXNzaW9uLmdldCgndXNlcicpLmlkOwogICAgICAgICAgICAgICAgYmFuZF9pZCA9IG1pYmFuZC5pZDsKICAgICAgICAgICAgICAgIGJvZHlkYXRhID0ge307CgogICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gbWliYW5kKSB7CiAgICAgICAgICAgICAgICAgIGJvZHlkYXRhW2tleV0gPSBtaWJhbmRba2V5XTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBib2R5ZGF0YVsndXNlcl9pZCddID0gdXNlcl9pZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiaHR0cDovLyIuY29uY2F0KF90aGlzMy5taWJhbmRfZGJfaG9zdCwgIjoiKS5jb25jYXQoX3RoaXMzLm1pYmFuZF9kYl9wb3J0LCAiL2JhbmRzLyIpLmNvbmNhdChiYW5kX2lkLCAiL3VwZGF0ZS1uZXctdXNlciIpLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGJvZHlkYXRhKSwKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCcKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdFsnYWRkLWJhbmQtcmVzdWx0J10gPT0gJ3N1Y2NlZWRlZCcpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXN1bHRbJ2JhbmQtaW5mbyddKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE5OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDUpOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dDMudDApOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzUsIDE5XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRCYW5kQnlTZXJpYWw6IGZ1bmN0aW9uIGdldEJhbmRCeVNlcmlhbChzZXJpYWwpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcGFyYW1zLCByZXNwb25zZSwgcmVzdWx0OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBwYXJhbXMgPSAnc2VyaWFsPScgKyBzZXJpYWw7CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChfdGhpczQubWliYW5kX2RiX2hvc3QsICI6IikuY29uY2F0KF90aGlzNC5taWJhbmRfZGJfcG9ydCwgIi9iYW5kcy9maW5kLWJ5LXNlcmlhbD8iKS5jb25jYXQocGFyYW1zKSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHRbJ2dldC1iYW5kLXJlc3VsdCddID09ICdzdWNjZWVkZWQnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgcmVzdWx0WydiYW5kLWluZm8nXSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxNTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC50MCA9IF9jb250ZXh0NFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0NC50MCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIG51bGwsIFtbMSwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGFkZEJhbmQ6IGZ1bmN0aW9uIGFkZEJhbmQobWFjX2FkZCwgYXV0aF9rZXkpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAodGhpcy5tYWNhZGRTdGF0ZSAmJiB0aGlzLmF1dGhrZXlTdGF0ZSkgewogICAgICAgIHRoaXMuY29ubmVjdEJhbmRBcGlDYWxsKG1hY19hZGQsIGF1dGhfa2V5KS50aGVuKGZ1bmN0aW9uIChiYW5kKSB7CiAgICAgICAgICBpZiAoYmFuZCkgewogICAgICAgICAgICAvL3NhdmUgZHRiCiAgICAgICAgICAgIC8vYXNzaWduIGJhbmQgaW5mbyB0byBtaWJhbmQgcmVmCiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBiYW5kKSB7CiAgICAgICAgICAgICAgX3RoaXM1Lm1pYmFuZFtrZXldID0gYmFuZFtrZXldOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczUuZ2V0QmFuZEJ5U2VyaWFsKGJhbmRbJ3NlcmlhbCddKS50aGVuKGZ1bmN0aW9uIChiYW5kKSB7CiAgICAgICAgICAgICAgaWYgKCFiYW5kKSB7CiAgICAgICAgICAgICAgICAvL25vIGJhbmQgd2l0aCBzYW1lIHNlcmlhbAogICAgICAgICAgICAgICAgX3RoaXM1LmFkZE5ld0JhbmREdGJBcGlDYWxsKF90aGlzNS5taWJhbmQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRzZXNzaW9uLnNldCgnbWliYW5kJywgcmVzdWx0KTsgLy9maW5pc2hlZAoKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnBhaXJpbmdTdGF0dXMgPSAnT0snOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczUuJGVtaXQoJ3VwZGF0ZS1saXN0LWRpc3BsYXknKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXM1LnBhaXJpbmdTdGF0dXMgPSAnRFRCJzsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy90aGlzIGJhbmQgaGFzIGJlZW4gdXNlZCAmIGFkZGVkIGludG8gZHRiIGJlZm9yZQogICAgICAgICAgICAgICAgaWYgKGJhbmQudXNlcl9pZCkgewogICAgICAgICAgICAgICAgICAvL3RoaXMgYmFuZCBpcyBjdXJyZW50bHkgcGFpcmVkIGJ5IGFuIHVzZXIKICAgICAgICAgICAgICAgICAgX3RoaXM1LnBhaXJpbmdTdGF0dXMgPSAnVU5BVkFJTEFCTEUnOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy90aGlzIGJhbmQgaXMgY3VycmVudGx5IGZyZWUKICAgICAgICAgICAgICAgICAgX3RoaXM1LmFkZEF2YWlsYWJsZUJhbmREdGJBcGlDYWxsKGJhbmQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS4kc2Vzc2lvbi5zZXQoJ21pYmFuZCcsIHJlc3VsdCk7IC8vZmluaXNoZWQKCgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnBhaXJpbmdTdGF0dXMgPSAnT0snOwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS4kZW1pdCgndXBkYXRlLWxpc3QtZGlzcGxheScpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBfdGhpczUucGFpcmluZ1N0YXR1cyA9ICdEVEInOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczUucGFpcmluZ1N0YXR1cyA9ICdFUlJPUic7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wYWlyaW5nU3RhdHVzID0gJ1BFTkRJTkcnOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["PairDeviceForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <b-card-title class=\"text-center mt-2\">\n      <div v-if=\"pairingStatus === 'OK'\">\n        <b-alert variant=\"success\" show>Pairing succeeded</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'ERROR'\">\n        <b-alert variant=\"danger\" show>Pair failed. Please check data correctness or data format</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'PENDING'\">\n        <b-alert variant=\"info\" show>Pairing...</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'DTB'\">\n        <b-alert variant=\"info\" show>Adding to database</b-alert>\n      </div>\n      <div v-if=\"pairingStatus === 'UNAVAILABLE'\">\n        <b-alert variant=\"warning\" show>Pair failed. This band is in using condition.<br> \n          If you want to pair, please hard reset the band.</b-alert>\n      </div>\n      \n      <b-skeleton-wrapper :loading=\"pairingStatus === 'PENDING' || pairingStatus === 'DTB'\">\n        <template #loading>\n        <b-card>\n          <b-skeleton width=\"85%\"></b-skeleton>\n          <b-skeleton width=\"55%\"></b-skeleton>\n          <b-skeleton width=\"70%\"></b-skeleton>\n        </b-card>\n      </template>\n      <b-form @submit.prevent=\"addBand\" v-if=\"pairingStatus !== 'OK'\">\n          <b-form-group \n            label=\"MAC address\"\n            :invalid-feedback=\"invalidMACadd\"\n            :state=\"macaddState\"\n          >\n            <b-form-input class=\"w-100 mb-1\"\n              :state=\"macaddState\"\n              v-model=\"miband.mac_address\"\n              required\n              placeholder=\"Example: a1:c2:3d:4e:f5:6a\"\n            ></b-form-input>\n          </b-form-group>\n\n          <b-form-group \n            label=\"Authentic key\"\n            :invalid-feedback=\"invalidAuthkey\"\n            :state=\"authkeyState\"\n          >\n            <b-form-input class=\"w-100 mb-1\"\n              :state=\"authkeyState\"\n              v-model=\"miband.auth_key\"\n              required\n              placeholder=\"Example: 8fa9b42078627a654d22beff985655db\"\n            ></b-form-input>\n          </b-form-group>\n          <div>\n              <b-button @click=\"addBand(miband.mac_address, miband.auth_key)\" variant=\"outline-success\" class=\"mr-1\">➕</b-button>\n              <b-button @click=\"$emit('exit-add-band-mode')\" variant=\"outline-danger\">✖️</b-button>\n          </div>\n      </b-form>\n      </b-skeleton-wrapper>\n    </b-card-title>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  computed: {\n    macaddState() {\n      var regex = /^(([A-Fa-f0-9]{2}[:]){5}[A-Fa-f0-9]{2}[,]?)+$/i;\n      \n      if(this.miband.mac_address=='') {\n        return null\n      }\n      return regex.test(this.miband.mac_address)\n    },\n    authkeyState() {\n      if(this.miband.auth_key=='') {\n        return null\n      }\n      return this.miband.auth_key.length == 32\n    },\n    invalidMACadd() {\n      if (this.miband.mac_address.length >= 17) {\n        return  'Please check your format. Example: a1:b2:c3:d4:e5:f6'\n      }\n      return null\n    },\n    invalidAuthkey() {\n      if (this.miband.auth_key.length > 0) {\n        return  'Authentic key length is 32. Example: 8fa9b42078627a654d22beff985655db'\n      }\n      return null\n    },\n  },\n  data() {\n    return {\n      miband: {\n          mac_address: 'E3:07:72:26:D4:6B',\n          auth_key: '2f20ba44fdcf54ca0c2c37cad1f85487'\n      },\n      pairingStatus: null,\n      miband_db_host: this.$api_hosts['miband_db_api'],\n      miband_db_port: this.$api_ports['miband_db_api'],\n      miband_host: this.$api_hosts['miband_api'],\n      miband_port: this.$api_ports['miband_api']\n    }\n  },\n  methods: {\n    async connectBandApiCall(mac_add, auth_key) {\n        try {\n            const response = await fetch(`http://${this.miband_host}:${this.miband_port}/band/connect`, {\n            method: 'POST',\n            body: JSON.stringify({\n                'mac_add': mac_add,\n                'auth_key': auth_key\n                }),\n            headers: { 'Content-type': 'application/json; charset=UTF-8' },\n            })\n            const result = await response.json()\n            if(result['connect-result']=='succeeded') {\n              return result['band-info']\n            }\n            else return false\n        } catch (error) {\n            console.error(error)\n        }\n    },\n\n    async addNewBandDtbApiCall(miband) {\n        const user_id = this.$session.get('user').id\n        const bodydata = {}\n        for (var key in miband) {\n          bodydata[key] = miband[key]\n        }\n        bodydata['user_id'] = user_id\n        try {\n            const response = await fetch(`http://${this.miband_db_host}:${this.miband_db_port}/bands`, {\n            method: 'POST',\n            body: JSON.stringify(\n                bodydata\n                ),\n            headers: { 'Content-type': 'application/json; charset=UTF-8' },\n            })\n            const result = await response.json()\n            if(result['add-band-result']=='succeeded') {\n              return result['band-info']\n            }\n            else return false\n        } catch (error) {\n            console.error(error)\n        }\n    },\n\n    async addAvailableBandDtbApiCall(miband) {\n        const user_id = this.$session.get('user').id\n        const band_id = miband.id\n        const bodydata = {}\n        for (var key in miband) {\n          bodydata[key] = miband[key]\n        }\n        bodydata['user_id'] = user_id\n        try {\n            const response = await fetch(`http://${this.miband_db_host}:${this.miband_db_port}/bands/${band_id}/update-new-user`, {\n            method: 'PUT',\n            body: JSON.stringify(\n                bodydata\n                ),\n            headers: { 'Content-type': 'application/json; charset=UTF-8' },\n            })\n            const result = await response.json()\n            if(result['add-band-result']=='succeeded') {\n              return result['band-info']\n            }\n            else return false\n        } catch (error) {\n            console.error(error)\n        }\n    },\n\n    async getBandBySerial(serial) {\n      const params = 'serial='+serial\n      try {\n        const response = await fetch(`http://${this.miband_db_host}:${this.miband_db_port}/bands/find-by-serial?${params}`)\n        const result = await response.json()\n        if(result['get-band-result']=='succeeded'){\n          return result['band-info']\n        }\n        else return false\n      }\n      catch (error){\n        console.log(error)\n      }\n    },\n    \n\n    addBand(mac_add, auth_key) {\n      if(this.macaddState && this.authkeyState) {\n        this.connectBandApiCall(mac_add, auth_key).then((band)=>{\n          if(band) {\n            //save dtb\n            //assign band info to miband ref\n            for(var key in band) {\n              this.miband[key] = band[key]\n            }\n\n            this.getBandBySerial(band['serial']).then((band)=>{\n              if(!band) { //no band with same serial\n                this.addNewBandDtbApiCall(this.miband).then((result)=>{\n                  if(result) {\n                    this.$session.set('miband', result)\n                    //finished\n                    this.pairingStatus = 'OK'\n                    this.$emit('update-list-display')\n                  }\n                })\n                this.pairingStatus = 'DTB'\n              }\n              else { //this band has been used & added into dtb before\n                if(band.user_id) { //this band is currently paired by an user\n                  this.pairingStatus = 'UNAVAILABLE'\n                }\n                else { //this band is currently free\n                  this.addAvailableBandDtbApiCall(band).then((result)=>{\n                    if(result) {\n                      this.$session.set('miband', result)\n                      //finished\n                      this.pairingStatus = 'OK'\n                      this.$emit('update-list-display')\n                    }\n                  })\n                  this.pairingStatus = 'DTB'\n                }\n                \n              }\n            })\n          }\n          else {\n            this.pairingStatus = 'ERROR'\n          }\n      \n        })\n        \n        this.pairingStatus = 'PENDING'\n      }\n      \n    }\n  }\n}\n</script>"],"sourceRoot":"src/components/device"}]}