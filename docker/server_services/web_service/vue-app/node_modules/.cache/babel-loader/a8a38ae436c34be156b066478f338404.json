{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/DeviceManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/DeviceManagement.vue","mtime":1607175226173},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2dyYWNlL3BqL21pY3Jvc2VydmljZXNfbWliYW5kNF9oZWFsdGhtb25pdG9yL2Zyb250ZW5kL3Z1ZS1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgUGFpckRldmljZUZvcm0gZnJvbSAnQC9jb21wb25lbnRzL2RldmljZS9QYWlyRGV2aWNlRm9ybSc7CmltcG9ydCBEZXZpY2VMaXN0IGZyb20gJ0AvY29tcG9uZW50cy9kZXZpY2UvRGV2aWNlTGlzdCc7CnZhciBtaWJhbmRfZGJfaG9zdCA9ICcxOTIuMTY4LjExLjEyMic7CnZhciBtaWJhbmRfZGJfcG9ydCA9ICc1MDAyJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFBhaXJEZXZpY2VGb3JtOiBQYWlyRGV2aWNlRm9ybSwKICAgIERldmljZUxpc3Q6IERldmljZUxpc3QKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhZGRCYW5kTW9kZTogZmFsc2UsCiAgICAgIGxpc3RrZXk6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZW50ZXJBZGRCYW5kTW9kZTogZnVuY3Rpb24gZW50ZXJBZGRCYW5kTW9kZSgpIHsKICAgICAgdGhpcy5hZGRCYW5kTW9kZSA9IHRydWU7CiAgICB9LAogICAgZXhpdEFkZEJhbmRNb2RlOiBmdW5jdGlvbiBleGl0QWRkQmFuZE1vZGUoKSB7CiAgICAgIHRoaXMuYWRkQmFuZE1vZGUgPSBmYWxzZTsKICAgIH0sCiAgICB1cGRhdGVMaXN0RGlzcGxheTogZnVuY3Rpb24gdXBkYXRlTGlzdERpc3BsYXkoKSB7CiAgICAgIHRoaXMubGlzdGtleSA9ICF0aGlzLmxpc3RrZXk7CiAgICB9LAogICAgcmVtb3ZlQmFuZERiQXBpQ2FsbDogZnVuY3Rpb24gcmVtb3ZlQmFuZERiQXBpQ2FsbChiYW5kKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHNlcmlhbCwgcmVzcG9uc2UsIHJlc3VsdDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzZXJpYWwgPSBiYW5kLnNlcmlhbDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goImh0dHA6Ly8iLmNvbmNhdChtaWJhbmRfZGJfaG9zdCwgIjoiKS5jb25jYXQobWliYW5kX2RiX3BvcnQsICIvZGVsZXRlYmFuZC8iKS5jb25jYXQoc2VyaWFsKSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHRbJ2RlbGV0ZS1yZXN1bHQnXSA9PSAic3VjY2VlZGVkIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCB0cnVlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGZhbHNlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE1OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHJlbW92ZUJhbmQ6IGZ1bmN0aW9uIHJlbW92ZUJhbmQoYmFuZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5yZW1vdmVCYW5kRGJBcGlDYWxsKGJhbmQpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLiRzZXNzaW9uLnJlbW92ZSgnbWliYW5kJyk7CgogICAgICAgIF90aGlzLnVwZGF0ZUxpc3REaXNwbGF5KCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["DeviceManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAeA,OAAA,cAAA,MAAA,oCAAA;AACA,OAAA,UAAA,MAAA,gCAAA;AAEA,IAAA,cAAA,GAAA,gBAAA;AACA,IAAA,cAAA,GAAA,MAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA,cADA;AAEA,IAAA,UAAA,EAAA;AAFA,GADA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GAVA;AAWA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KAHA;AAIA,IAAA,eAJA,6BAIA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,KANA;AAQA,IAAA,iBARA,+BAQA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA,KAVA;AAYA,IAAA,mBAZA,+BAYA,IAZA,EAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,MADA,GACA,IAAA,CAAA,MADA;AAAA;AAAA;AAAA,uBAGA,KAAA,kBAAA,cAAA,cAAA,cAAA,yBAAA,MAAA,EAHA;;AAAA;AAGA,gBAAA,QAHA;AAAA;AAAA,uBAIA,QAAA,CAAA,IAAA,EAJA;;AAAA;AAIA,gBAAA,MAJA;;AAAA,sBAOA,MAAA,CAAA,eAAA,CAAA,IAAA,WAPA;AAAA;AAAA;AAAA;;AAAA,iDAQA,IARA;;AAAA;AAAA,iDASA,KATA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,KAzBA;AA0BA,IAAA,UA1BA,sBA0BA,IA1BA,EA0BA;AAAA;;AACA,WAAA,mBAAA,CAAA,IAAA,EAAA,IAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,MAAA,CAAA,QAAA;;AACA,QAAA,KAAA,CAAA,iBAAA;AACA,OAHA;AAIA;AA/BA;AAXA,CAAA","sourcesContent":["<template>\n    <b-card title=\"My device\">\n        <b-button variant=\"outline-primary\" class=\"w-100\" @click=\"enterAddBandMode\">+ Add device</b-button>\n        <pair-device-form v-if=\"addBandMode\" \n            @exit-add-band-mode=\"exitAddBandMode\"\n            @update-list-display=\"updateListDisplay\"\n        />\n        <device-list class=\"mt-1\" :key=\"listkey\"\n            @unpair-band=\"removeBand\"\n            @update-list-display=\"updateListDisplay\"\n        />\n    </b-card>\n</template>\n\n<script>\nimport PairDeviceForm from '@/components/device/PairDeviceForm'\nimport DeviceList from '@/components/device/DeviceList'\n\nconst miband_db_host='192.168.11.122'\nconst miband_db_port='5002'\n\nexport default {\n    components: { \n        PairDeviceForm,\n        DeviceList\n    },\n    data() {\n        return {\n            addBandMode: false,\n            listkey: false,\n        }\n    },\n    methods: {\n        enterAddBandMode() {\n            this.addBandMode = true\n        },\n        exitAddBandMode() {\n            this.addBandMode = false\n        },\n\n        updateListDisplay() {\n            this.listkey = !this.listkey\n        },\n\n        async removeBandDbApiCall(band) {\n            const serial = band.serial\n            try {\n                const response = await fetch(`http://${miband_db_host}:${miband_db_port}/deleteband/${serial}`)\n                const result = await response.json()\n\n                // do something with `data`\n                if(result['delete-result']==\"succeeded\")\n                    return true\n                else return false\n            } catch (error) {\n                // do something with `error`\n            }\n        },\n        removeBand(band) {\n            this.removeBandDbApiCall(band).then(()=>{\n                this.$session.remove('miband')\n                this.updateListDisplay()\n            })\n        }\n    }\n}\n</script>"],"sourceRoot":"src/components"}]}