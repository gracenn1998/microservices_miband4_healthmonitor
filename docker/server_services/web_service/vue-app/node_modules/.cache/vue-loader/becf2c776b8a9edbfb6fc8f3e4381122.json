{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/DeviceManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/DeviceManagement.vue","mtime":1607175226173},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWlyRGV2aWNlRm9ybSBmcm9tICdAL2NvbXBvbmVudHMvZGV2aWNlL1BhaXJEZXZpY2VGb3JtJwppbXBvcnQgRGV2aWNlTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvZGV2aWNlL0RldmljZUxpc3QnCgpjb25zdCBtaWJhbmRfZGJfaG9zdD0nMTkyLjE2OC4xMS4xMjInCmNvbnN0IG1pYmFuZF9kYl9wb3J0PSc1MDAyJwoKZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogeyAKICAgICAgICBQYWlyRGV2aWNlRm9ybSwKICAgICAgICBEZXZpY2VMaXN0CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBhZGRCYW5kTW9kZTogZmFsc2UsCiAgICAgICAgICAgIGxpc3RrZXk6IGZhbHNlLAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgZW50ZXJBZGRCYW5kTW9kZSgpIHsKICAgICAgICAgICAgdGhpcy5hZGRCYW5kTW9kZSA9IHRydWUKICAgICAgICB9LAogICAgICAgIGV4aXRBZGRCYW5kTW9kZSgpIHsKICAgICAgICAgICAgdGhpcy5hZGRCYW5kTW9kZSA9IGZhbHNlCiAgICAgICAgfSwKCiAgICAgICAgdXBkYXRlTGlzdERpc3BsYXkoKSB7CiAgICAgICAgICAgIHRoaXMubGlzdGtleSA9ICF0aGlzLmxpc3RrZXkKICAgICAgICB9LAoKICAgICAgICBhc3luYyByZW1vdmVCYW5kRGJBcGlDYWxsKGJhbmQpIHsKICAgICAgICAgICAgY29uc3Qgc2VyaWFsID0gYmFuZC5zZXJpYWwKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly8ke21pYmFuZF9kYl9ob3N0fToke21pYmFuZF9kYl9wb3J0fS9kZWxldGViYW5kLyR7c2VyaWFsfWApCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCkKCiAgICAgICAgICAgICAgICAvLyBkbyBzb21ldGhpbmcgd2l0aCBgZGF0YWAKICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnZGVsZXRlLXJlc3VsdCddPT0ic3VjY2VlZGVkIikKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2UKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIGBlcnJvcmAKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgcmVtb3ZlQmFuZChiYW5kKSB7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlQmFuZERiQXBpQ2FsbChiYW5kKS50aGVuKCgpPT57CiAgICAgICAgICAgICAgICB0aGlzLiRzZXNzaW9uLnJlbW92ZSgnbWliYW5kJykKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTGlzdERpc3BsYXkoKQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["DeviceManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeviceManagement.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <b-card title=\"My device\">\n        <b-button variant=\"outline-primary\" class=\"w-100\" @click=\"enterAddBandMode\">+ Add device</b-button>\n        <pair-device-form v-if=\"addBandMode\" \n            @exit-add-band-mode=\"exitAddBandMode\"\n            @update-list-display=\"updateListDisplay\"\n        />\n        <device-list class=\"mt-1\" :key=\"listkey\"\n            @unpair-band=\"removeBand\"\n            @update-list-display=\"updateListDisplay\"\n        />\n    </b-card>\n</template>\n\n<script>\nimport PairDeviceForm from '@/components/device/PairDeviceForm'\nimport DeviceList from '@/components/device/DeviceList'\n\nconst miband_db_host='192.168.11.122'\nconst miband_db_port='5002'\n\nexport default {\n    components: { \n        PairDeviceForm,\n        DeviceList\n    },\n    data() {\n        return {\n            addBandMode: false,\n            listkey: false,\n        }\n    },\n    methods: {\n        enterAddBandMode() {\n            this.addBandMode = true\n        },\n        exitAddBandMode() {\n            this.addBandMode = false\n        },\n\n        updateListDisplay() {\n            this.listkey = !this.listkey\n        },\n\n        async removeBandDbApiCall(band) {\n            const serial = band.serial\n            try {\n                const response = await fetch(`http://${miband_db_host}:${miband_db_port}/deleteband/${serial}`)\n                const result = await response.json()\n\n                // do something with `data`\n                if(result['delete-result']==\"succeeded\")\n                    return true\n                else return false\n            } catch (error) {\n                // do something with `error`\n            }\n        },\n        removeBand(band) {\n            this.removeBandDbApiCall(band).then(()=>{\n                this.$session.remove('miband')\n                this.updateListDisplay()\n            })\n        }\n    }\n}\n</script>"]}]}