{"remainingRequest":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/DeviceList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/src/components/device/DeviceList.vue","mtime":1607539144138},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/grace/pj/microservices_miband4_healthmonitor/frontend/vue-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgY3JlYXRlZCgpIHsKICAgIGlmKHRoaXMuJHNlc3Npb24uZ2V0KCdtaWJhbmQnKT09dW5kZWZpbmVkKSB7CiAgICAgIHRoaXMuZ2V0QmFuZEluZm8oKS50aGVuKChiYW5kaW5mbyk9PnsKICAgICAgICBpZihiYW5kaW5mbyl7CiAgICAgICAgICB0aGlzLiRzZXNzaW9uLnNldCgnbWliYW5kJywgYmFuZGluZm8pCiAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtbGlzdC1kaXNwbGF5JykKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWliYW5kOiB0aGlzLiRzZXNzaW9uLmdldCgnbWliYW5kJyksCgogICAgICBtaWJhbmRfZGJfaG9zdDogdGhpcy4kYXBpX2hvc3RzWydtaWJhbmRfZGJfYXBpJ10sCiAgICAgIG1pYmFuZF9kYl9wb3J0OiB0aGlzLiRhcGlfcG9ydHNbJ21pYmFuZF9kYl9hcGknXSwKICAgICAgbWliYW5kX2hvc3Q6IHRoaXMuJGFwaV9ob3N0c1snbWliYW5kX2FwaSddLAogICAgICBtaWJhbmRfcG9ydDogdGhpcy4kYXBpX3BvcnRzWydtaWJhbmRfYXBpJ10KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGVtaXRBbmRDbG9zZU1vZGFsKCkgewogICAgICB0aGlzLiRlbWl0KCd1bnBhaXItYmFuZCcpCiAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnY29uZmlybS1yZW1vdmUtbW9kYWwnKQogICAgfSwKCiAgICBhc3luYyBnZXRCYW5kSW5mbygpIHsKICAgICAgY29uc3QgdXNlcmlkID0gdGhpcy4kc2Vzc2lvbi5nZXQoJ3VzZXInKS5pZAogICAgICBjb25zdCBwYXJhbXMgPSAnP3VzZXJfaWQ9Jyt1c2VyaWQKICAgICAgdHJ5IHsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly8ke3RoaXMubWliYW5kX2RiX2hvc3R9OiR7dGhpcy5taWJhbmRfZGJfcG9ydH0vYmFuZHMvZmluZC1ieS11c2VyaWQke3BhcmFtc31gKQogICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpCiAgICAgICAgICBpZihyZXN1bHRbJ2dldC1iYW5kLXJlc3VsdCddPT0nc3VjY2VlZGVkJyl7CiAgICAgICAgICAgIHJldHVybiByZXN1bHRbJ2JhbmQtaW5mbyddCiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIC8vIGRvIHNvbWV0aGluZyB3aXRoIGBlcnJvcmAKICAgICAgfQogICAgICB9LAogIH0KfQo="},{"version":3,"sources":["DeviceList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeviceList.vue","sourceRoot":"src/components/device","sourcesContent":["<template>\n  <div>\n    <b-card v-if=\"$session.get('miband')!=undefined\">\n      <div class=\"card-header d-flex justify-content-between\">\n        <h4>Miband</h4>\n        <div>\n          <!-- <b-button \n            v-b-tooltip.hover title=\"Edit\"\n            v-b-modal.confirm-remove-modal\n            variant=\"outline-primary\"\n          >üìù</b-button> -->\n          <b-button  class=\"ml-2\"\n            v-b-tooltip.hover title=\"Unpair\"\n            v-b-modal.confirm-remove-modal\n            variant=\"outline-danger\"\n          >‚úñÔ∏è</b-button>\n        </div>\n        \n\n        <b-modal id=\"confirm-remove-modal\" hide-footer title=\"Confirmation\">\n          <div class=\"d-block text-center\">\n            <h4>Do you really want to unpair this device?</h4>\n          </div>\n          <div class=\"d-flex justify-content-end\">\n            <b-button class=\"mt-3 mr-3\"  @click=\"$bvModal.hide('confirm-remove-modal')\">Cancel</b-button>\n            <b-button class=\"mt-3 mr-4\" variant=\"danger\" @click=\"emitAndCloseModal()\">Unpair</b-button>\n          </div>\n          \n        </b-modal>\n      </div>\n\n      <b-list-group horizontal>\n        <b-list-group-item class=\"w-25\">MAC</b-list-group-item>\n        <b-list-group-item class=\"w-75\">{{miband.mac_address}}</b-list-group-item>\n      </b-list-group>\n      <b-list-group horizontal>\n        <b-list-group-item class=\"w-25\">Key</b-list-group-item>\n        <b-list-group-item class=\"w-75\">{{miband.auth_key}}</b-list-group-item>\n      </b-list-group>\n      \n\n    </b-card>\n  </div>\n  \n</template>\n\n<script>\n\n  export default {\n    created() {\n      if(this.$session.get('miband')==undefined) {\n        this.getBandInfo().then((bandinfo)=>{\n          if(bandinfo){\n            this.$session.set('miband', bandinfo)\n            this.$emit('update-list-display')\n          }\n        })\n      }\n    },\n    data() {\n      return {\n        miband: this.$session.get('miband'),\n\n        miband_db_host: this.$api_hosts['miband_db_api'],\n        miband_db_port: this.$api_ports['miband_db_api'],\n        miband_host: this.$api_hosts['miband_api'],\n        miband_port: this.$api_ports['miband_api']\n      }\n    },\n    methods: {\n      emitAndCloseModal() {\n        this.$emit('unpair-band')\n        this.$bvModal.hide('confirm-remove-modal')\n      },\n\n      async getBandInfo() {\n        const userid = this.$session.get('user').id\n        const params = '?user_id='+userid\n        try {\n            const response = await fetch(`http://${this.miband_db_host}:${this.miband_db_port}/bands/find-by-userid${params}`)\n            const result = await response.json()\n            if(result['get-band-result']=='succeeded'){\n              return result['band-info']\n            }\n            return false\n        } catch (error) {\n            // do something with `error`\n        }\n        },\n    }\n  }\n</script>"]}]}